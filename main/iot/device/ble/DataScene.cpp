#include "DataScene.h"
#include "Log.h"

static Json::Value dataScene = Json::arrayValue;

void DataScene::InitDataScene()
{
    std::string data = R"([{"id":1,"name":"Tắt phòng","categories":[{"devices":{"type":12001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12002,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12005,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12006,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12007,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12013,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12014,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12003,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12004,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12008,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12009,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12010,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12011,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12012,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12015,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12016,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12020,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12021,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12022,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12023,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12024,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12025,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12026,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":13001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14002,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14003,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":15001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":21001,"properties":{"onoff":0}}},{"devices":{"type":21002,"properties":{"onoff":0}}}]},{"id":2,"name":"Mùađông","categories":[{"devices":{"type":12001,"properties":{"onoff":1,"dim":80,"cct":0}}},{"devices":{"type":12002,"properties":{"onoff":1,"dim":80,"cct":0}}},{"devices":{"type":12005,"properties":{"onoff":1,"dim":80,"cct":0}}},{"devices":{"type":12006,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12007,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12013,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12014,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12003,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12004,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12008,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12009,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12010,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12011,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12012,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12015,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12016,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12020,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12021,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12022,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12023,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12024,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12025,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12026,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":13001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14002,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14003,"properties":{"onoff":1,"dim":80,"cct":0}}},{"devices":{"type":15001,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":21001,"properties":{"onoff":1}}},{"devices":{"type":21002,"properties":{"onoff":1}}}]},{"id":3,"name":"Mùahè","categories":[{"devices":{"type":12001,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12002,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12005,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12006,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12007,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12013,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12014,"properties":{"onoff":1,"dim":100,"cct":100}}},{"devices":{"type":12003,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12004,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12008,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12009,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12010,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12011,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12012,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12015,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12016,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12020,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12021,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12022,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12023,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12024,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12025,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12026,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":13001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14002,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14003,"properties":{"onoff":1,"dim":80,"cct":100}}},{"devices":{"type":15001,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":21001,"properties":{"onoff":1}}},{"devices":{"type":21002,"properties":{"onoff":1}}}]},{"id":4,"name":"Trungtính","categories":[{"devices":{"type":12001,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12002,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12005,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12006,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12007,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12013,"properties":{"onoff":1,"dim":80,"cct":0}}},{"devices":{"type":12014,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":12003,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12004,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12008,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12009,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12010,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12011,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12012,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12015,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12016,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12020,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12021,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12022,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12023,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12024,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12025,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12026,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":13001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14001,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14002,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":14003,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":15001,"properties":{"onoff":1,"dim":80,"cct":29}}},{"devices":{"type":21001,"properties":{"onoff":1}}},{"devices":{"type":21002,"properties":{"onoff":1}}}]},{"id":5,"name":"Sinhnhật","categories":[{"devices":{"type":12001,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12002,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12005,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12006,"properties":{"onoff":1,"dim":100,"cct":0}}},{"devices":{"type":12007,"properties":{"onoff":1,"dim":100,"cct":0}}},{"devices":{"type":12013,"properties":{"onoff":1,"dim":100,"cct":0}}},{"devices":{"type":12014,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12003,"properties":{"onoff":1,"dim":100,"cct":0}}},{"devices":{"type":12004,"properties":{"onoff":1,"dim":100,"cct":0}}},{"devices":{"type":12008,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12009,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12010,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12011,"properties":{"onoff":1,"dim":100,"cct":0}}},{"devices":{"type":12012,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12015,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12016,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12020,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12021,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12022,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12023,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12024,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12025,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":12026,"properties":{"onoff":1,"dim":100,"cct":29}}},{"devices":{"type":13001,"properties":{"sceneRGB":2}}},{"devices":{"type":14001,"properties":{"sceneRGB":2}}},{"devices":{"type":14002,"properties":{"sceneRGB":2}}},{"devices":{"type":14003,"properties":{"sceneRGB":2}}},{"devices":{"type":15001,"properties":{"sceneRGB":2}}},{"devices":{"type":21001,"properties":{"onoff":1}}},{"devices":{"type":21002,"properties":{"onoff":1}}}]},{"id":6,"name":"Xemphim","categories":[{"devices":{"type":12001,"properties":{"onoff":1,"dim":30,"cct":29}}},{"devices":{"type":12002,"properties":{"onoff":1,"dim":30,"cct":29}}},{"devices":{"type":12005,"properties":{"onoff":1,"dim":30,"cct":29}}},{"devices":{"type":12006,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12007,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12013,"properties":{"onoff":1,"dim":50,"cct":0}}},{"devices":{"type":12014,"properties":{"onoff":1,"dim":30,"cct":29}}},{"devices":{"type":12003,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12004,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12008,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12009,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12010,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12011,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12012,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12015,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12016,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12020,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12021,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12022,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12023,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12024,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12025,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":12026,"properties":{"onoff":0,"cct":100}}},{"devices":{"type":13001,"properties":{"h":52792,"s":15728,"l":31457}}},{"devices":{"type":14001,"properties":{"h":52792,"s":15728,"l":31457}}},{"devices":{"type":14002,"properties":{"h":52792,"s":15728,"l":31457}}},{"devices":{"type":14003,"properties":{"h":52792,"s":15728,"l":31457}}},{"devices":{"type":15001,"properties":{"onoff":1,"dim":100,"h":52792,"s":15728,"l":31457}}},{"devices":{"type":21001,"properties":{"onoff":1}}},{"devices":{"type":21002,"properties":{"onoff":1}}}]}])";
    dataScene.parse(data);

    if (!dataScene.isArray())
    {
        LOGW("DataScene format error");
    }
}

Json::Value DataScene::GetDataScene()
{
    return dataScene;
}

Json::Value DataScene::GetDataDeviceInScene(uint32_t type, int idScene)
{
    InitDataScene();
    Json::Value rs = Json::nullValue;
    for (const auto &scene : dataScene)
    {
        if (scene.isObject() && scene.isMember("id") && scene["id"].isInt() && scene.isMember("categories") && scene["categories"].isArray())
        {
            int id = scene["id"].asInt();
            if (id == idScene)
            {
                Json::Value categories = scene["categories"];
                for (auto &category : categories)
                {
                    if (category.isObject() && category.isMember("devices") && category["devices"].isObject())
                    {
                        Json::Value device = category["devices"];
                        if (device.isObject() && device.isMember("type") && device["type"].isInt() && device.isMember("properties") && device["properties"].isObject())
                        {
                            if (device["type"].asInt() == type)
                            {
                                rs = device["properties"];
                                return rs;
                            }
                        }
                    }
                }
            }
        }
    }
    return rs;
}
